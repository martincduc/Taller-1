:root {
  /* Paleta Cálida y "Sabrosa" */
  --primary: #ea580c;       /* Naranja quemado */
  --primary-dark: #c2410c;  
  --secondary: #fff7ed;     /* Crema suave */
  --accent: #fbbf24;        
  
  --bg: #FAFAF9;            
  --surface: #ffffff;
  
  --text: #1c1917;          
  --text-light: #57534e;    
  --border: #e7e5e4;        
  
  --success: #16a34a;
  --danger: #dc2626;
  --warning: #f59e0b;

  --radius: 16px;
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  
  --font-sans: 'Inter', system-ui, sans-serif;
  --font-mono: 'Space Mono', monospace;
}

* { box-sizing: border-box; }

body { 
  margin: 0; 
  font-family: var(--font-sans); 
  background-color: var(--bg); 
  color: var(--text); 
  line-height: 1.6; 
  scroll-behavior: smooth;
  -webkit-font-smoothing: antialiased;
}

button { cursor: pointer; font-family: inherit; transition: all 0.2s ease; }
button:active { transform: scale(0.96); }
a { cursor: pointer; text-decoration: none; transition: 0.2s; }
.hidden { display: none !important; }

/* --- ANIMACIONES GLOBALES --- */
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
@keyframes popIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }

/* --- TOPBAR --- */
.topbar { 
  background: rgba(255, 255, 255, 0.9); 
  backdrop-filter: blur(12px); 
  border-bottom: 1px solid rgba(0,0,0,0.05);
  padding: 0.8rem 2rem; 
  display: flex; 
  align-items: center; 
  justify-content: space-between; 
  position: sticky; 
  top: 0; 
  z-index: 1000; 
  box-shadow: var(--shadow-sm);
}

.brand { display: flex; align-items: center; gap: 12px; }
.logo { 
  background: var(--primary); 
  color: white; 
  width: 42px; height: 42px; 
  border-radius: 10px; 
  display: grid; 
  place-items: center; 
  font-weight: 800; 
  font-size: 1.2rem; 
  box-shadow: 0 4px 10px rgba(234, 88, 12, 0.3);
}
.brand-text strong { font-size: 1.2rem; color: var(--text); letter-spacing: -0.5px; }
.brand-text span { font-size: 0.75rem; color: var(--primary); text-transform: uppercase; font-weight: 700; letter-spacing: 0.5px; }

.nav { display: flex; gap: 6px; background: var(--secondary); padding: 4px; border-radius: 12px; }
.nav-link { 
  padding: 8px 18px; 
  border-radius: 8px; 
  color: var(--text-light); 
  font-weight: 500; 
  font-size: 0.95rem;
}
.nav-link:hover { color: var(--primary); background: rgba(255,255,255,0.5); }
.nav-link.active { background: white; color: var(--primary); font-weight: 600; box-shadow: var(--shadow-sm); }

.actions { display: flex; align-items: center; gap: 16px; }

.search { 
  display: flex; 
  align-items: center;
  background: var(--surface); 
  border: 1px solid var(--border); 
  border-radius: 50px; 
  padding: 6px 16px; 
  transition: 0.2s;
}
.search:focus-within { border-color: var(--primary); box-shadow: 0 0 0 3px rgba(234, 88, 12, 0.1); }
.search input { border: none; background: transparent; outline: none; padding: 4px; width: 180px; font-size: 0.9rem; }
.search button { border: none; background: transparent; color: var(--text-light); }

.cart-btn { 
  background: var(--surface); 
  border: 1px solid var(--border); 
  padding: 8px 16px; 
  border-radius: 50px; 
  font-weight: 600; 
  display: flex; 
  align-items: center; 
  gap: 8px; 
  color: var(--text); 
}
.cart-btn:hover { border-color: var(--primary); color: var(--primary); background: var(--secondary); }
.cart-btn.has-items { background: var(--secondary); border-color: var(--primary); color: var(--primary); }
.cart-btn.has-items #cartCount { background: var(--primary); color: white; padding: 2px 6px; border-radius: 10px; font-size: 0.75rem; }

.btn-primary { 
  background: var(--primary); color: white; border: none; padding: 12px 24px; 
  border-radius: 10px; font-weight: 600; box-shadow: 0 4px 6px rgba(234, 88, 12, 0.2);
}
.btn-primary:hover { background: var(--primary-dark); transform: translateY(-1px); box-shadow: 0 6px 12px rgba(234, 88, 12, 0.3); }

.btn-secondary { 
  background: white; border: 1px solid var(--border); color: var(--text); 
  padding: 12px 24px; border-radius: 10px; font-weight: 600; 
}
.btn-secondary:hover { background: var(--bg); border-color: var(--text-light); }
.btn-login { background: var(--text); color: white; padding: 8px 18px; border-radius: 50px; font-size: 0.9rem; font-weight: 600; border: none; }
.btn-login:hover { background: black; transform: translateY(-1px); }

/* --- USER MENU --- */
.user-menu { position: relative; }
.user-avatar { width: 40px; height: 40px; background: linear-gradient(135deg, var(--primary), var(--accent)); color: white; border-radius: 50%; display: grid; place-items: center; font-weight: 700; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
.dropdown-menu { position: absolute; top: 130%; right: 0; width: 200px; background: var(--surface); border-radius: 12px; box-shadow: var(--shadow-lg); padding: 8px; border: 1px solid var(--border); animation: popIn 0.15s ease; z-index: 1001; }
.dropdown-item { width: 100%; text-align: left; padding: 10px 14px; background: none; border: none; border-radius: 8px; font-size: 0.9rem; color: var(--text); transition: 0.1s; display: flex; align-items: center; gap: 8px; }
.dropdown-item:hover { background: var(--bg); color: var(--primary); }
.dropdown-item.logout { color: var(--danger); border-top: 1px solid var(--border); margin-top: 4px; }
.dropdown-item.logout:hover { background: #fef2f2; }

/* --- LAYOUT MAIN --- */
main { max-width: 1240px; margin: 2rem auto; padding: 0 1.5rem; min-height: 80vh; }

.carrusel { 
  border-radius: 24px; overflow: hidden; position: relative; height: 400px; 
  margin-bottom: 3rem; box-shadow: var(--shadow-lg);
}
.carrusel img { width: 100%; height: 100%; object-fit: cover; filter: brightness(0.85); transition: transform 6s ease; }
.carrusel:hover img { transform: scale(1.05); }
.carrusel-overlay { 
  position: absolute; inset: 0; background: linear-gradient(to right, rgba(0,0,0,0.8), transparent); 
  display: flex; flex-direction: column; justify-content: center; padding: 4rem; color: white; 
}
.tag { background: var(--accent); color: #000; padding: 6px 14px; border-radius: 50px; font-weight: 700; font-size: 0.8rem; width: fit-content; margin-bottom: 12px; text-transform: uppercase; letter-spacing: 1px; }
.carrusel-title { font-size: 3.5rem; font-weight: 800; margin: 0 0 1.5rem 0; line-height: 1.1; letter-spacing: -1px; text-shadow: 0 2px 10px rgba(0,0,0,0.3); }
.carrusel-btn { background: white; color: black; border: none; padding: 14px 28px; border-radius: 50px; font-weight: 700; font-size: 1rem; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
.carrusel-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 16px rgba(0,0,0,0.25); }

/* GRID PRODUCTOS */
.toolbar { margin-bottom: 2rem; display: flex; justify-content: space-between; align-items: center; background: white; padding: 1rem; border-radius: 16px; border: 1px solid var(--border); }
.filters { display: flex; gap: 10px; flex-wrap: wrap; }
select { padding: 10px 16px; border-radius: 8px; border: 1px solid var(--border); background: var(--bg); color: var(--text); font-weight: 500; cursor: pointer; outline: none; }
#aplicarFiltros { padding: 10px 24px; background: var(--text); color: white; border-radius: 8px; font-weight: 600; border: none; }
#aplicarFiltros:hover { background: #000; }

.grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 2rem; }
.card { 
  background: var(--surface); border-radius: 20px; overflow: hidden; 
  transition: all 0.3s ease; display: flex; flex-direction: column; cursor: pointer; 
  box-shadow: var(--shadow-sm); animation: fadeIn 0.5s ease backwards; 
}
.card:hover { transform: translateY(-8px); box-shadow: var(--shadow-lg); }
.pic { height: 220px; position: relative; overflow: hidden; }
.pic img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.6s ease; }
.card:hover .pic img { transform: scale(1.08); }
.card-body { padding: 1.5rem; flex: 1; display: flex; flex-direction: column; }
.card h4 { margin: 0 0 0.5rem 0; font-size: 1.15rem; font-weight: 700; }
.price { font-size: 1.2rem; font-weight: 800; color: var(--primary); margin-bottom: 0.5rem; }
.stock { font-size: 0.8rem; font-weight: 600; margin-bottom: 1.2rem; display: inline-block; padding: 4px 10px; border-radius: 6px; }
.stock.ok { background: #dcfce7; color: #166534; } 
.stock.agotado { background: #fee2e2; color: #991b1b; }
.card .row { display: flex; gap: 10px; margin-top: auto; }
button.mini { flex: 1; padding: 10px; border-radius: 8px; font-weight: 600; font-size: 0.9rem; display: flex; justify-content: center; align-items: center; }
button.mini.btn-agregar-catalogo { background: var(--secondary); color: var(--primary); border: 1px solid transparent; }
button.mini.btn-agregar-catalogo:hover { background: var(--primary); color: white; }
button.mini:not(.btn-agregar-catalogo) { background: transparent; border: 1px solid var(--border); color: var(--text-light); }
button.mini:not(.btn-agregar-catalogo):hover { border-color: var(--text); color: var(--text); }

.paginacion { margin-top: 3rem; display: flex; justify-content: center; align-items: center; gap: 1rem; }
.paginacion button { background: white; border: 1px solid var(--border); padding: 10px 20px; border-radius: 8px; font-weight: 600; color: var(--text); }

/* PRODUCTO DETALLE */
.product-layout { display: grid; grid-template-columns: 1.2fr 1fr; gap: 3rem; background: white; padding: 3rem; border-radius: 24px; box-shadow: var(--shadow-md); animation: fadeIn 0.4s ease; }
@media(max-width: 800px) { .product-layout { grid-template-columns: 1fr; padding: 1.5rem; } }
.main-image-container { aspect-ratio: 1/1; border-radius: 20px; overflow: hidden; box-shadow: var(--shadow-sm); position: relative; }
.main-image-container img { width: 100%; height: 100%; object-fit: cover; }
.badge-overlay { background: var(--text); color: white; padding: 6px 14px; border-radius: 50px; font-weight: 700; font-size: 0.85rem; position: absolute; top: 1.5rem; left: 1.5rem; z-index: 2; }
.category-tag { color: var(--primary); font-weight: 700; text-transform: uppercase; letter-spacing: 1.5px; font-size: 0.8rem; margin-bottom: 0.5rem; }
.product-info h1 { font-size: 2.8rem; font-weight: 800; margin: 0 0 1rem 0; line-height: 1.1; }
.big-price { font-size: 2.2rem; font-weight: 800; color: var(--text); }
.divider { height: 1px; background: var(--border); width: 100%; margin: 2rem 0; }
.description-text { font-size: 1.1rem; color: var(--text-light); line-height: 1.7; }
.add-to-cart-box { background: var(--bg); padding: 2rem; border-radius: 16px; margin-top: 1rem; border: 1px solid var(--border); }
.qty-control { display: flex; align-items: center; background: white; border: 1px solid var(--border); border-radius: 10px; }
.qty-control button { width: 45px; height: 45px; font-size: 1.2rem; color: var(--primary); border: none; background: transparent; }
.qty-control input { height: 45px; background: transparent; border: none; text-align: center; font-weight: bold; width: 50px; }

/* CARRITO */
.cart-items, .cart-summary, .box { background: white; border-radius: 16px; border: 1px solid var(--border); padding: 2rem; box-shadow: var(--shadow-sm); }
.carrito-item { padding: 1.5rem 0; border-bottom: 1px solid var(--border); display: grid; grid-template-columns: 80px 1fr auto auto auto; gap: 1.5rem; align-items: center; }
.carrito-item:last-child { border-bottom: none; }
.carrito-item img { border-radius: 12px; width: 80px; height: 80px; object-fit: cover; }
.summary-row { display: flex; justify-content: space-between; margin-bottom: 10px; color: var(--text-light); }
.summary-row.total { color: var(--text); font-weight: 800; font-size: 1.2rem; }

/* FORMS */
.auth-container { max-width: 420px; margin: 4rem auto; animation: popIn 0.3s ease; }
.auth-form { padding: 2.5rem; border-radius: 20px; background: white; box-shadow: var(--shadow-lg); }
.form-group { margin-bottom: 1.5rem; }
.form-group label { display: block; margin-bottom: 6px; font-size: 0.9rem; color: var(--text-light); font-weight: 600; }
.form-control { width: 100%; padding: 12px 16px; border: 1px solid var(--border); border-radius: 10px; background: var(--bg); transition: 0.2s; font-size: 1rem; font-family: inherit; }
.form-control:focus { background: white; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(234, 88, 12, 0.1); outline: none; }

/* TOAST */
.toast-container { position: fixed; bottom: 30px; right: 30px; z-index: 9999; display: flex; flex-direction: column; gap: 10px; }
.toast { background: white; padding: 18px 24px; border-radius: 12px; box-shadow: var(--shadow-lg); border-left: 5px solid var(--text); font-weight: 600; display: flex; align-items: center; gap: 10px; animation: popIn 0.3s ease; }
.toast.success { border-color: var(--success); }
.toast.error { border-color: var(--danger); }

/* FOOTER */
.footer { background: #1c1917; color: white; padding: 5rem 0 2rem; margin-top: 6rem; border-top: 5px solid var(--primary); }
.footer-content { max-width: 1200px; margin: 0 auto; padding: 0 1.5rem; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 3rem; margin-bottom: 3rem; }
.footer-col h3 { font-size: 1.2rem; margin-bottom: 1.5rem; color: white; letter-spacing: 0.5px; }
.footer-col p, .footer-col a { color: #a8a29e; margin-bottom: 0.8rem; display: block; text-decoration: none; font-size: 0.95rem; }
.footer-col a:hover { color: var(--primary); padding-left: 5px; }
.copy { text-align: center; color: #57534e; border-top: 1px solid #292524; padding-top: 2rem; font-size: 0.9rem; }

/* --- ESTILOS DE BOLETA MEJORADA (TICKET REALISTA) --- */
.modal-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,0.75); z-index: 9999;
  display: flex; justify-content: center; align-items: center;
  backdrop-filter: blur(5px); animation: fadeIn 0.3s ease;
}

.boleta-ticket {
  background: #fff;
  width: 320px; /* Ancho típico de impresora térmica */
  padding: 20px;
  font-family: 'Space Mono', 'Courier New', monospace; /* Fuente monoespaciada esencial */
  font-size: 12px;
  color: #000;
  box-shadow: 0 20px 40px rgba(0,0,0,0.4);
  position: relative;
  text-transform: uppercase;
}

/* Efecto de borde dentado (Sawtooth) usando gradiente radial */
.boleta-ticket::before {
  content: "";
  position: absolute;
  top: -10px;
  left: 0;
  width: 100%;
  height: 10px;
  background: radial-gradient(circle, transparent, transparent 50%, #fff 50%, #fff 100%) 0 0 / 10px 10px;
}
.boleta-ticket::after {
  content: "";
  position: absolute;
  bottom: -10px;
  left: 0;
  width: 100%;
  height: 10px;
  background: radial-gradient(circle, transparent, transparent 50%, #fff 50%, #fff 100%) 0 0 / 10px 10px;
  transform: rotate(180deg);
}

.boleta-header { text-align: center; margin-bottom: 15px; border-bottom: 1px dashed #000; padding-bottom: 10px; }
.boleta-header h2 { font-size: 16px; margin: 0; font-weight: bold; }
.boleta-header p { margin: 2px 0; font-size: 10px; }

.boleta-info { display: flex; flex-direction: column; gap: 4px; margin-bottom: 15px; }
.info-line { display: flex; justify-content: space-between; }

.boleta-items { border-bottom: 1px dashed #000; padding-bottom: 10px; margin-bottom: 10px; }
.tbl-header { display: flex; justify-content: space-between; font-weight: bold; border-bottom: 1px solid #000; margin-bottom: 5px; padding-bottom: 2px; }
.item-row { display: flex; justify-content: space-between; margin-bottom: 4px; }
.item-name { max-width: 70%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

.boleta-total { font-size: 14px; font-weight: bold; text-align: right; margin-top: 5px; }
.boleta-footer { text-align: center; margin-top: 20px; font-size: 10px; }
.barcode { height: 30px; background: repeating-linear-gradient(90deg, #000 0, #000 2px, transparent 2px, transparent 4px); width: 80%; margin: 10px auto; }

.boleta-actions { margin-top: 20px; display: flex; gap: 10px; flex-direction: column; }
.btn-print { background: #000; color: #fff; border: none; padding: 10px; width: 100%; font-family: var(--font-sans); font-weight: bold; cursor: pointer; border-radius: 4px; }
.btn-close { background: #ccc; color: #000; border: none; padding: 10px; width: 100%; font-family: var(--font-sans); font-weight: bold; cursor: pointer; border-radius: 4px; }

@media print {
  body * { visibility: hidden; }
  .modal-overlay, .boleta-ticket, .boleta-ticket * { visibility: visible; }
  .modal-overlay { background: white; position: absolute; left: 0; top: 0; width: 100%; height: 100%; align-items: flex-start; padding-top: 0; }
  .boleta-ticket { box-shadow: none; width: 100%; max-width: 300px; margin: 0; padding: 0; }
  .boleta-actions { display: none; }
  .boleta-ticket::before, .boleta-ticket::after { display: none; } /* Quitar bordes dentados al imprimir */
}

.history-list { list-style: none; padding: 0; margin: 0; }
.history-list li button:hover { background: var(--danger) !important; color: white !important; }